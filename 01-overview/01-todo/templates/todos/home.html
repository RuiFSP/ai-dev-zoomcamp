{% extends "base.html" %}

{% block title %}TODOs{% endblock %}

{% block content %}
  <section>
    <form method="post">
      {% csrf_token %}
      <div class="form-title">Add a new TODO</div>
      {{ form.as_p }}
      <button type="submit">Add</button>
    </form>
  </section>

  <section>
    {% for todo in todos %}
      <div class="todo">
        <span class="todo-main">
          <strong class="{% if todo.completed %}done{% endif %}">{{ todo.title }}</strong>
          {% if todo.description %}<br><small>{{ todo.description }}</small>{% endif %}
          {% if todo.due_date %}<br><small>Due: {{ todo.due_date }}</small>{% endif %}
        </span>
        <span class="todo-actions">
          <form method="post" action="{% url 'todos:toggle' todo.pk %}" class="inline">{% csrf_token %}
            <button type="submit">{% if todo.completed %}Undo{% else %}Done{% endif %}</button>
          </form>
          <a href="{% url 'todos:edit' todo.pk %}"><button>Edit</button></a>
          <form method="post" action="{% url 'todos:delete' todo.pk %}" class="inline">{% csrf_token %}
            <button type="submit">Delete</button>
          </form>
        </span>
      </div>
    {% empty %}
      <p style="text-align:center;color:#888;">No TODOs yet.</p>
    {% endfor %}
  </section>
{% endblock %}
